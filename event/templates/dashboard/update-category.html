{% extends "dashboard/dashboard.html" %}
{% block dashboard %}
{% load crispy_forms_tags %}
{% load static %}




<form id="updatcat"  action="#updatcat" method="GET" >
    <h1  class="font-semibold text-center mb-7">Search by name</h1>

    {% if category_ache == "no" %}
<p id="updatcat" class="text-center font-semibold text-red-600 mb-4">No events found.</p>
{% elif category_ache == "empty_search" %}
<p id="updatcat"  class="text-center font-semibold text-red-600 mb-4">Please enter something in the searchbox.</p>
{% endif %}
    
    <div id="updatcat" class="flex justify-center items-center mb-20 px-4">
        <div class="search md:mt-0 mt-4 w-full md:w-auto flex gap-2">
            <input class="text-black font-semibold px-2 py-1 outline-none border
            border-rose-700 bg-transparent w-full md:w-auto" name="key" type="search" placeholder="name">
            <button type="submit" class="border border-white bg-rose-800 text-white font-semibold px-2 py-1 rounded-md">Search</button>
        </div>
    </div>
</form>


{% if messages %}
  <div id="updatcat">
    {% for message in messages %}
      <div class="text-center md:w-[500px] md:mx-auto bg-green-500 text-white font-semibold border border-green-300 p-3 rounded mb-4">
        <h1 >{{message}}</h1>
      </div>
    {% endfor %}
  </div>
{% endif %}

{% if categories %}
<div id="updatcat" class="event-box grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 px-10">
    {% for category in categories %}
    <div class="eb border border-white shadow-lg p-4 shadow-gray-400">
        <img class="shadow-2xl border border-green-950 w-full" src="{% static "images/Hero-1.webp" %}" alt="">
        <h1>Name: {{ category.name }}</h1>
<form method="GET" action="{% url 'updatecategory' %}#updatcat">
    <input type="hidden" name="edit_id" value="{{ category.id }}">
    <button type="submit" class="bg-rose-800 w-full text-white font-semibold px-2 py-1 rounded-md mt-10">Edit</button>
</form>


    </div>
    {% endfor %}
</div>
{% endif %}

{% if edit_id_ache == "yes" %}
<h1 id="updateevent" class="text-center text-rose-800 font-bold text-[25px] mb-3">Update Category</h1>
    <div class="border md:w-[500px] mx-auto p-4 mb-4 shadow-lg">
<form id="updatcat"  action="#updatcat" class="space-y-4" method="POST">
    {% csrf_token %}
    <!-- {{ form|crispy }} -->
    {{ form.as_p }}
    <input type="hidden" name="category_id" value="{{ edit_category.id }}">
    <button type="submit" class="bg-rose-700 mt-7 text-white font-bold px-4 py-1 rounded-md">
        Save Changes
    </button>
</form>
    </div>
{% endif %}


{% endblock dashboard %}